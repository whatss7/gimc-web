<!DOCTYPE html>
<html>

<head>
	<meta name="viewport"
		content="width=device-width, initial-scale=1.0, minimum-scale=0.5, maximum-scale=2.0, user-scalable=yes"
		charset="UTF-8" />
	<title>gimc-web</title>
	<script type="text/javascript" src="./context.js"></script>
	<link rel="stylesheet" type="text/css" href="./styles.css">
	</style>
</head>

<body>
	<div style="margin: 0 auto; text-align: center; max-width: 500px">
		<div>
			<div id="traditional_input_div">
				<div class="flexdiv" >
					<p>目标为：</p>
					<input id="lvlText" type="number" value="3" min="1" max="10" style="width: 100%; min-width: 0" />
					<p>级材料</p>
					<input id="numText" type="number" value="16" min="0" style="width: 100%; min-width: 0" />
					<p>个</p>
				</div>
			</div>
			<div id="sequential_input_div" hidden>
				<div class="flexdiv">
					<p>目标物品序列：</p>
					<input id="goalText" type="text" size="1" style="width: 100%; min-width: 0" />
				</div>
			</div>
		</div>
		<div class="flexdiv">
			<p>类型为：</p>
			<label>
			<input type="radio" name="material_type" id="type_weapon" />
				武器
			</label>
			<label>
			<input type="radio" name="material_type" id="type_talent" checked />
				天赋
			</label>
			<label>
			<input type="radio" name="material_type" id="type_others" />
				其他
			</label>
		</div>

		<div class="vertical_list" style="margin: 5px 0px;">
			<input type="button" value="通过目标等级选择" onclick="open_level_popup()"/>
			<input type="button" value="快速选择" onclick="open_fast_button()"/>
		</div>

		<div class="flexdiv">
			<p>当前物品序列：</p>
			<input id="inputText" type="text" size="1" style="width: 100%; min-width: 0" />
		</div>

		<div>
			<p class="inline">点击</p>
			<input class="inline" id="runBtn" type="button" value="运行" onclick="run()" />
			<p class="inline">得到结果：</p>
		</div>

		<div>
			<p id="resultTextDefault">欢迎使用 gimc-web</p>
			<p id="resultTextReturn">请在“当前拥有的物品序列”中从高到低输入你所拥有的材料数目，低级没有需补 0，例如"7 15 0"</p>
			<p id="resultTextDouble">然后选择你的目标材料等级和数目，点击“运行”，这里就会显示计算结果</p>
		</div>

		<div class="vertical_list">
			<input type="button" value="设置" onclick="open_settings()"/>
		</div>

		<div id="overlay"></div>

		<div id="level_popup">
			<div class="flexdiv">
				<p>类型为：</p>
				<input type="radio" name="level_material_type" id="level_type_weapon" />
				<label for="level_type_weapon">武器</label>
				<input type="radio" name="level_material_type" id="level_type_talent" checked />
				<label for="level_type_talent">天赋</label>
			</div>
			<div id="level_weapon_div" hidden>
				<div class="flexdiv">
					<p>当前武器等级：</p>
					<input type="number" min="1" max="90" value="1" id="weapon_level" />
					<p>/</p>
					<input type="number" min="20" max="90" step="10" value="20" id="weapon_level" />
				</div>
				<div class="flexdiv">
					<p>目标武器等级：</p>
					<input type="number" min="1" max="90" value="90" id="weapon_level" />
					<p>/</p>
					<input type="number" min="20" max="90" step="10" value="90" id="weapon_level" />
				</div>
			</div>
			<div id="level_talent_div" hidden>
				<div class="flexdiv">
					<p>普通攻击：</p>
					<input type="number" min="1" max="10" value="1" id="talent_a_level" />
					<p>&rarr;</p>
					<input type="number" min="1" max="10" value="9" id="talent_a_goal" />
				</div>
				<div class="flexdiv">
					<p>元素战技：</p>
					<input type="number" min="1" max="10" value="1" id="talent_e_level" />
					<p>&rarr;</p>
					<input type="number" min="1" max="10" value="9" id="talent_e_goal" />
				</div>
				<div class="flexdiv">
					<p>元素爆发：</p>
					<input type="number" min="1" max="10" value="1" id="talent_q_level" />
					<p>&rarr;</p>
					<input type="number" min="1" max="10" value="9" id="talent_q_goal" />
				</div>
			</div>
			<div style="margin: 10px">
				<input type="button" value="确定" onclick="close_level_popup()"/>
				<input type="button" value="附加" onclick="close_level_popup()"/>
				<input type="button" value="取消" onclick="close_level_popup()"/>
			</div>
		</div>

		<div id="fast_popup">
			<div>
				<div class="vertical_list">
					<input type="button" value="12个3级（天赋8-9级）" onclick="setval(12, 3, 1); close_fast_button();" />
					<input type="button" value="16个3级（天赋9-10级）" onclick="setval(16, 3, 1); close_fast_button();" />
					<input type="button" value="24个3级（角色80级突破）" onclick="setval(24, 3, 2); close_fast_button();" />
					<input type="button" value="3个4级（三星武器80级突破）" onclick="setval(3, 4, 0); close_fast_button();" />
					<input type="button" value="4个4级（四星武器80级突破）" onclick="setval(4, 4, 0); close_fast_button();" />
					<input type="button" value="6个4级（五星武器80级突破）" onclick="setval(6, 4, 0); close_fast_button();" />
					<input type="button" value="取消" onclick="close_fast_button();" />
				</div>
			</div>
		</div>

		<div id="settings_popup">
			<div class="flexdiv">
				<p>模拟重复次数：</p>
				<input id="repText" type="number" min="1" value="1000"/>
				<p>次</p>
			</div>
			<div class="vertical_list">
				<div>
					<input type="checkbox" id="sequential_input_checkbox"/>
					<label for="sequential_input_checkbox">目标使用序列输入</p>
				</div>
			</div>
			<input type="button" value="保存" onclick="save_settings()" />
			<input type="button" value="取消" onclick="discard_settings()" />
		</div>
	</div>
	<script>
		document.addEventListener("keypress", function (event) {
			if (event.key === "Enter") {
				event.preventDefault();
				document.getElementById("runBtn").click();
			}
		});
	</script>
</body>

</html>